---
title: "ЗБЧ и ЦПТ: Парадокс дней рождений."
output: 
  html_document:
    css: ../css/style.css
    toc: TRUE
    toc_float: TRUE
    toc_depth: 4
    highlight: pygments
editor_options: 
  chunk_output_type: console
---
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**Парадокс дней рождений:** в произвольной группе из  $50$  человек вероятность того, что хотя бы у двоих людей дни рождения совпадут, равна  $0.97$. Но это в теории, при предпосылке, что люди равномерно рождаются в течение года. Давайте проверим это.

Нам понадобится пакет для отрисовки графиков. С ним мы подробнее будем знакомиться на следующих семинарах. Пока просто подгрузим его. 

```{r}
# install.packages('ggplot2')
library(ggplot2)
```

Теперь подгрузим данные и посмотрим на первые 5 строк в таблице.  

```{r}
data <- read.csv('data/birthdays.csv', sep = ',')
head(data)
```

Посмотрим на размерность данных. 

```{r}
dim(data)
```

Проверим, распределены ли дни рождения равномерно в нашем датасете. Для этого отрисуем несложный график. 

```{r}
# можно не вдумываться в то, как работает код ниже
data$bmonth <- factor(data$bmonth)
ggplot(data, aes(x = bmonth)) + geom_histogram(stat="count")
```

И наконец, эмпирически оценим вероятность того, что в группе из 50 произвольных людей найдутся хотя бы двое с одинаковым днём рождения. Сделать нам это позволит Закон Больших Чисел! 

```{r}
n = 1000  # число симуляций 
m = 0     # счётчик для наших событий

for (i in 1:1000){
  # вытаскиваем 50 случайных людей
  peoples <- sample(nrow(data), size=50)
  # получаем массив из их дней рождений
  birthdays <- data[sample(nrow(data), size=50), 'bdate']
  # считаем сколько в этом массиве вышло уникальных дней рождений
  birthdays_unique <- unique(data[sample(nrow(data), size=50), 'bdate'])
  # если длина массива birthdays_unique < 50 => есть люди с одинаковыми датами дней рождений
  usl <- length(birthdays_unique) < 50
  # если условие выполнено, то прибавляем событие (TRUE: 1, FALSE: 0)
  m <- m + usl
}

print(m / n)
```

Похоже на правду.








